# FluorCam Toolbox

<img src=".images/README/fluorcam_toolbox_logo.png" style="zoom: 33%;" />

## Description

**FluorCam Toolbox** is a comprehensive R Shiny web application designed to streamline the analysis of chlorophyll fluorescence data generated by PSI FluorCam systems. The application provides a user-friendly interface for processing multiple .TXT files simultaneously, performing automated statistical analyses, and generating publication-ready visualizations without requiring programming knowledge.

Key features include:
- **Automated data processing**: Handles FluorCam's native .TXT output format with flexible file naming patterns
- **Statistical analysis**: Automatic selection between parametric and non-parametric tests with post-hoc analyses
- **Time-course analysis**: Quantile Generalized Additive Models (qGAM) for robust temporal data modeling
- **Professional visualizations**: Publication-quality plots with statistical annotations
- **Multi-format export**: High-resolution graphics and statistical results in multiple formats
- **Session isolation**: Secure multi-user support with automatic cleanup

## Installation Methods

### Method 1: Local Installation

For individual use on your personal computer:

1. **Install R and RStudio** (if not already installed)

2. **Clone the repository**:
   ```bash
   git clone https://github.com/cecile-lecampion/shiny_fluorcam.git
   cd shiny_fluorcam
   ```

3. **Run App**:
   Open RStudio :

   Go to File -> Open File

   Select the App.R in the shiny_fluorcam directory

4. **Launch the application**:

   Click the “Run App” button in the pane at the top left of the RStudio IDE.

   The application will open in your default web browser.

### Method 2: Server Installation (Ubuntu 24)

For multi-user deployment on a dedicated server:

#### Prerequisites Installation
```bash
sudo apt install -y gfortran cmake libfontconfig1-dev libcurl4-openssl-dev
sudo apt install -y libxml2-dev libharfbuzz-dev libfribidi-dev
sudo apt install -y libfreetype6-dev libpng-dev libtiff5-dev libjpeg-dev
sudo apt install -y liblapack-dev libblas-dev libnlopt-dev
sudo apt install -y --no-install-recommends software-properties-common dirmngr
```

#### R Installation (Latest Version)
```bash
# Add CRAN repository key
wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc

# Add CRAN repository
add-apt-repository "deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/"

# Install R and Shiny
sudo apt update
sudo apt install -y --no-install-recommends r-base
sudo R -e "install.packages('shiny', repos='https://cran.rstudio.com/')"
```

#### Shiny Server Installation
```bash
sudo apt install -y gdebi-core
cd /tmp
curl -O 'https://download3.rstudio.org/ubuntu-20.04/x86_64/shiny-server-1.5.23.1030-amd64.deb'
sudo gdebi shiny-server-1.5.23.1030-amd64.deb
rm shiny-server-1.5.23.1030-amd64.deb
```

#### Deploy the Application
1. **Upload application files** to `/srv/shiny-server/fluorcam_toolbox/` using SFTP with the `shiny` user account
2. **Access the application** via web browser at: `http://<server-address>:3838/fluorcam_toolbox/`

#### Server Management Commands
```bash
# Check server status
sudo systemctl status shiny-server

# Start/stop/restart server
sudo systemctl start shiny-server
sudo systemctl stop shiny-server
sudo systemctl restart shiny-server

# View logs
sudo tail -f /var/log/shiny-server/*.log
```

## Usage

Detailed step-by-step usage instructions are available in the **help.md** document, which can be accessed directly from the application interface through the help section. This comprehensive guide covers:

- File preparation and naming conventions
- Data loading procedures
- Statistical analysis options
- Visualization customization
- Export procedures
- Troubleshooting common issues

## Requirements

**R Version**: ≥ 4.0.0

**Key Dependencies**:
- shiny, shinydashboard (UI framework)
- ggplot2, ggpubr (visualizations)  
- mgcv (GAM modeling)
- multcomp, PMCMRplus (statistical testing)
- DT, readr (data handling)

All dependencies are automatically managed through the `global.R` configuration file.

## License

This project is licensed under the MIT License - see the repository for details.

## Support

For technical issues, feature requests, or scientific questions about chlorophyll fluorescence analysis, please refer to the help documentation within the application or contact the development team through the repository's issue tracker.
